(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,s){},180:function(e,t,s){},181:function(e,t,s){"use strict";s.r(t);var r=s(2),n=s.n(r),a=s(26),c=s.n(a),o=(s(116),s(8)),i=s(61),l=s(13),j=s(14),d=s(20),h=s(16),u=s(15),b=s(107),m=s(182),O=s(183),x=s(184),p=s(185),f=s(186),g=s(187),v=s(209),N=s(190),k=s(191),w=s(192),y=s(193),M=s(194),E=s(195),S=s(188),L=s(210),C=s(211),D=s(189),I=s(10),A=s(7),T=s(0),F=function(e){return e&&e.length},R=function(e){return function(t){return!t||t.length<=e}},B=function(e){return function(t){return t&&t.length>=e}},q=function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)};function _(e){return!1===e.isSignedIn?Object(T.jsxs)(n.a.Fragment,{children:["\xa0",Object(T.jsxs)(b.a,{color:"primary",outline:!0,onClick:e.toggleRegister,children:[Object(T.jsx)("span",{className:"fa fa-user-plus fa-lg"})," Register"]})]}):Object(T.jsx)(n.a.Fragment,{})}var U=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={isNavOpen:!1,isModalOpen:!1,isRegisterOpen:!1,dropdownOpen:!1},r.toggleModal=r.toggleModal.bind(Object(d.a)(r)),r.toggleNav=r.toggleNav.bind(Object(d.a)(r)),r.handleLogin=r.handleLogin.bind(Object(d.a)(r)),r.handleLogout=r.handleLogout.bind(Object(d.a)(r)),r.toggleRegister=r.toggleRegister.bind(Object(d.a)(r)),r.toggle=r.toggle.bind(Object(d.a)(r)),r}return Object(j.a)(s,[{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"toggleNav",value:function(){window.innerWidth<1200&&this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"toggleRegister",value:function(e){this.setState({isRegisterOpen:!this.state.isRegisterOpen})}},{key:"handleLogin",value:function(e){this.toggleModal(),this.props.loginUser({username:this.username.value,password:this.password.value}),e.preventDefault()}},{key:"handleLogout",value:function(){this.props.logoutUser()}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"render",value:function(){var e=this;return Object(T.jsxs)(n.a.Fragment,{children:[Object(T.jsx)(m.a,{color:"dark",dark:!0,expand:"xl",fixed:"top",children:Object(T.jsxs)("div",{className:"container",children:[Object(T.jsx)(O.a,{onClick:this.toggleNav}),Object(T.jsx)(x.a,{className:"mr-auto text-primary",href:"/home",children:"Book Lovers"}),Object(T.jsxs)(p.a,{isOpen:this.state.isNavOpen,navbar:!0,children:[Object(T.jsxs)(f.a,{navbar:!0,children:[Object(T.jsx)(g.a,{className:"ml-2",onClick:this.toggleNav,children:Object(T.jsxs)(I.c,{className:"nav-link text-primary",to:"/home",children:[Object(T.jsx)("span",{className:"fa fa-home fa-lg"})," Home"]})}),this.props.auth.userinfo&&this.props.auth.userinfo.admin?Object(T.jsx)(g.a,{className:"",children:Object(T.jsxs)(S.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle,children:[Object(T.jsx)(L.a,{color:"Primary",children:Object(T.jsxs)("div",{className:"text-primary",children:[Object(T.jsx)("span",{className:"fa fa-book fa-lg"})," Books \xa0 ",Object(T.jsx)("i",{className:"fa fa-caret-down fa-sm","aria-hidden":"true"})]})}),Object(T.jsxs)(C.a,{children:[Object(T.jsx)(D.a,{onClick:this.toggleNav,tag:I.b,to:"/books",children:"View / Modify books"}),Object(T.jsx)(D.a,{divider:!0}),Object(T.jsx)(D.a,{onClick:this.toggleNav,tag:I.b,to:"/add_book",children:"Add book"})]})]})}):Object(T.jsx)(g.a,{className:"ml-2",onClick:this.toggleNav,children:Object(T.jsxs)(I.c,{className:"nav-link text-primary",to:"/books",children:[Object(T.jsx)("span",{className:"fa fa-book fa-lg"})," Books"]})}),Object(T.jsx)(g.a,{className:"ml-2",onClick:this.toggleNav,children:Object(T.jsxs)(I.c,{className:"nav-link text-primary",to:"/search",children:[Object(T.jsx)("span",{className:"fa fa-search fa-lg"})," Search"]})}),this.props.auth.isAuthenticated?Object(T.jsx)(g.a,{onClick:this.toggleNav,className:"ml-2",children:Object(T.jsxs)(I.c,{className:"nav-link text-primary",to:"/profile",children:[Object(T.jsx)("span",{className:"fa fa-user-circle-o fa-lg"})," My Profile"]})}):Object(T.jsx)("div",{}),this.props.auth.isAuthenticated&&!this.props.auth.userinfo.admin?Object(T.jsx)(g.a,{onClick:this.toggleNav,className:"ml-2",children:Object(T.jsxs)(I.c,{className:"nav-link text-primary",to:"/history",children:[Object(T.jsx)("span",{className:"fa fa-history"})," Issue history"]})}):Object(T.jsx)("div",{}),this.props.auth.isAuthenticated&&this.props.auth.userinfo.admin?Object(T.jsxs)(n.a.Fragment,{children:[Object(T.jsx)(g.a,{onClick:this.toggleNav,className:"ml-2",children:Object(T.jsxs)(I.c,{className:"nav-link text-primary",to:"/issue",children:[Object(T.jsx)("span",{className:"fa fa-plus-square"})," Issue Book"]})}),Object(T.jsx)(g.a,{onClick:this.toggleNav,className:"ml-2",children:Object(T.jsxs)(I.c,{className:"nav-link text-primary",to:"/return",children:[Object(T.jsx)("span",{className:"fa fa-list-ul"})," Return Book"]})}),Object(T.jsx)(g.a,{onClick:this.toggleNav,className:"ml-2",children:Object(T.jsxs)(I.c,{className:"nav-link text-primary",to:"/stats",children:[Object(T.jsx)("span",{className:"fa fa-info-circle"})," Stats"]})})]}):Object(T.jsx)("div",{})]}),Object(T.jsx)(f.a,{className:"ml-auto",navbar:!0,children:Object(T.jsxs)(g.a,{children:[this.props.auth.isAuthenticated?Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"navbar-text mr-3",children:this.props.auth.user.username}),Object(T.jsxs)(b.a,{outline:!0,color:"primary",onClick:this.handleLogout,children:[Object(T.jsx)("span",{className:"fa fa-sign-out fa-lg"})," Logout",this.props.auth.isLoading?Object(T.jsx)("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null]})]}):Object(T.jsxs)(b.a,{outline:!0,color:"primary",onClick:this.toggleModal,children:[Object(T.jsx)("span",{className:"fa fa-sign-in fa-lg"})," Login",this.props.auth.isLoading?Object(T.jsx)("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null]}),Object(T.jsx)(_,{isSignedIn:this.props.auth.isAuthenticated,toggleRegister:function(){e.toggleRegister()}})]})})]})]})}),Object(T.jsxs)(v.a,{isOpen:!this.props.auth.isAuthenticated&&this.state.isModalOpen,toggle:this.toggleModal,children:[Object(T.jsx)(N.a,{toggle:this.toggleModal,children:"Sign In"}),Object(T.jsx)(k.a,{children:Object(T.jsxs)(w.a,{onSubmit:this.handleLogin,children:[Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"username",children:"Username"}),Object(T.jsx)(E.a,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"password",children:"Password"}),Object(T.jsx)(E.a,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})]}),Object(T.jsx)(b.a,{type:"submit",value:"submit",color:"primary",children:"Login"})]})})]}),Object(T.jsxs)(v.a,{isOpen:this.state.isRegisterOpen,toggle:this.toggleRegister,children:[Object(T.jsx)(N.a,{toggle:this.toggleRegister,children:"Register"}),Object(T.jsx)(k.a,{children:Object(T.jsxs)(A.LocalForm,{model:"user",onSubmit:function(t){e.toggleRegister(),e.props.registerUser({username:t.username,password:t.password,email:t.email,roll:t.roll,firstname:t.firstname,lastname:t.lastname})},children:[Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"username",children:"Username"}),Object(T.jsx)(A.Control.text,{model:".username",id:"username",name:"username",className:"form-control",placeholder:"Username",validators:{required:F,minLength:B(3),maxLength:R(20)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".username",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"password",children:"Password"}),Object(T.jsx)(A.Control.password,{model:".password",id:"password",name:"password",className:"form-control",placeholder:"password",validators:{required:F,minLength:B(6),maxLength:R(20)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".password",show:"touched",messages:{required:"Required",minLength:" Must be greater than 5 characters",maxLength:" Must be 20 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"firstname",children:"First Name"}),Object(T.jsx)(A.Control.text,{model:".firstname",id:"firstname",name:"firstname",className:"form-control",placeholder:"firstname",validators:{required:F,minLength:B(3),maxLength:R(20)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".firstname",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"lastname",children:"Last Name"}),Object(T.jsx)(A.Control.text,{model:".lastname",id:"lastname",name:"lastname",className:"form-control",placeholder:"lastname",validators:{required:F,minLength:B(3),maxLength:R(20)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".lastname",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"roll",children:"Roll No."}),Object(T.jsx)(A.Control.text,{model:".roll",id:"roll",name:"roll",className:"form-control",placeholder:"roll",validators:{required:F,minLength:B(3),maxLength:R(12)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".roll",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 12 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"email",children:"E-mail"}),Object(T.jsx)(A.Control.text,{model:".email",id:"email",name:"email",className:"form-control",placeholder:"email",validators:{required:F,validEmail:q}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".email",show:"touched",messages:{required:"Required",validEmail:" Enter a valid email"}})]}),Object(T.jsx)(b.a,{type:"submit",value:"submit",color:"primary",children:"Sign Up"})]})})]})]})}}]),s}(r.Component),P=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r}return Object(j.a)(s,[{key:"render",value:function(){return Object(T.jsx)("p",{className:"footer",align:"center",children:"\xa9 Copyright 2019 IIT(ISM)"})}}]),s}(r.Component),V=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return Object(T.jsxs)("div",{className:"container mt-4 home text-center align-self-center",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("div",{className:"row mt-3 darkbg text-center justify-content-center",children:Object(T.jsx)("h1",{align:"center",children:" Welcome to Book Lovers"})}),Object(T.jsx)("div",{className:"row darkbg"}),Object(T.jsxs)("div",{className:"row darkbg justify-content-center",children:[Object(T.jsxs)("table",{children:[Object(T.jsxs)("tr",{children:[" ",Object(T.jsx)("th",{colspan:"2",children:Object(T.jsx)("h6",{children:"Library Timings"})})," "]}),Object(T.jsxs)("tr",{children:[" ",Object(T.jsxs)("td",{children:[Object(T.jsx)("h6",{children:"Opening Time"})," "]})," ",Object(T.jsxs)("td",{children:[" ",Object(T.jsx)("h6",{children:"9.00 A.M."})]})]}),Object(T.jsxs)("tr",{children:[" ",Object(T.jsx)("td",{children:"Closing Time "})," ",Object(T.jsx)("td",{children:" 9.00 P.M."})]})]}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{})]}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{})]})}}]),s}(r.Component),J=s(196),Y=function(){return Object(T.jsxs)("div",{className:"col-12 heading justify-content-center loading",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsxs)("h1",{align:"center",children:[Object(T.jsx)("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),"Loading ...."]})]})};function z(e){var t=e.book,s=e.changeSelected,r=e.isAdmin,a=e.toggleDeleteModal,c=e.toggleEditModal,o=e.i;return Object(T.jsxs)(n.a.Fragment,{children:[Object(T.jsx)("td",{children:o}),Object(T.jsx)("td",{children:Object(T.jsx)(I.b,{to:"/books/".concat(t._id),children:t.name})}),Object(T.jsx)("td",{children:t.isbn}),Object(T.jsx)("td",{children:t.author}),Object(T.jsx)("td",{children:t.copies}),r?Object(T.jsxs)("td",{children:[Object(T.jsx)("span",{onClick:function(){s(t._id),c()},className:"Option fa fa-pencil"}),"\xa0 \xa0 ",Object(T.jsx)("span",{onClick:function(){s(t._id),a()},className:"Option fa fa-trash"})]}):Object(T.jsx)(n.a.Fragment,{})]})}var G=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props.books.map((function(t){return Object(T.jsx)("tr",{children:Object(T.jsx)(z,{book:t,isAdmin:e.props.isAdmin,changeSelected:e.props.changeSelected,toggleDeleteModal:e.props.toggleDeleteModal,toggleEditModal:e.props.toggleEditModal,i:e.i++})},t.name)}));return this.props.booksLoading?Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})}):this.props.booksErrMess?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.booksErrMess})]})})}):Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col-12 heading",children:[Object(T.jsx)("h3",{align:"center",children:"List of All books"}),Object(T.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"S.No."}),Object(T.jsx)("th",{children:"Name of Book"}),Object(T.jsx)("th",{children:"ISBN number"}),Object(T.jsx)("th",{children:"Authors"}),Object(T.jsx)("th",{children:"Copies available"}),this.props.isAdmin?Object(T.jsxs)("th",{children:["Edit / ",Object(T.jsx)("br",{}),"Delete"]}):Object(T.jsx)(n.a.Fragment,{})]})}),Object(T.jsx)("tbody",{children:t})]})]})})})}}]),s}(r.Component),K=s(197),W=s(198),Z=s(199),$=s(200),H=s(201),Q=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={name:"",author:"",cat:["Romance","Technology","Computer Science","Management","Electronics","Physics","Chemistry","Mathematics","Fiction","Philosophy","Language","Arts","Other"]},r.onChange=r.onChange.bind(Object(d.a)(r)),r}return Object(j.a)(s,[{key:"onChange",value:function(e){var t=this.state.cat,s=-1;if(e.target.checked)t.push(e.target.value);else{for(var r=0;r<t.length;r++)if(t[r]===e.target.value){s=r;break}t.splice(s,1)}this.setState({cat:t})}},{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=["warning","danger","success","info","secondary"],s=new RegExp(this.state.name,"i"),r=new RegExp(this.state.author,"i"),a=this.props.books.map((function(a){var c=e.state.cat.some((function(e){return e===a.cat}));return-1!==a.name.search(s)&&-1!==a.author.search(r)&&c?Object(T.jsxs)(K.a,{children:[Object(T.jsx)(I.b,{to:"/books/".concat(a._id),children:Object(T.jsx)("b",{children:"".concat(a.name,"  ")})}),Object(T.jsxs)(W.a,{color:t[a.cat.length%5],pill:!0,children:[" ",a.cat]}),e.props.isAdmin?Object(T.jsxs)(n.a.Fragment,{children:["\xa0 \xa0",Object(T.jsx)("span",{onClick:function(){e.props.changeSelected(a._id),e.props.toggleEditModal()},className:"Option fa fa-pencil"}),"  ","\xa0   \xa0        ",Object(T.jsx)("span",{onClick:function(){e.props.changeSelected(a._id),e.props.toggleDeleteModal()},className:"Option fa fa-trash"})]}):Object(T.jsx)(n.a.Fragment,{}),Object(T.jsx)("br",{})," ",Object(T.jsxs)("p",{className:"ml-auto",children:[" Authors : ","    ".concat(a.author)]}),Object(T.jsxs)("p",{children:[" ",a.copies," Copies available"]}),Object(T.jsxs)("p",{children:["Location : "," Floor- ".concat(a.floor,", Shelf- ").concat(a.shelf)]})]},a._id):Object(T.jsx)(n.a.Fragment,{})}));return this.props.booksLoading?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})}):this.props.booksErrMess?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.booksErrMess})]})})}):Object(T.jsxs)("div",{className:"container loading",children:[Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col-12 heading",children:[Object(T.jsx)("h3",{align:"center",children:"Search your book here : "}),Object(T.jsxs)(w.a,{children:[Object(T.jsxs)(Z.a,{form:!0,children:[Object(T.jsx)($.a,{md:6,children:Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{for:"name",children:"Name of book"}),Object(T.jsx)(E.a,{type:"name",name:"name",id:"name",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})},placeholder:"Enter name of the book"})]})}),Object(T.jsx)($.a,{md:6,children:Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{for:"author",children:"Author"}),Object(T.jsx)(E.a,{type:"author",name:"author",id:"author",value:this.state.author,onChange:function(t){e.setState({author:t.target.value})},placeholder:"Enter name of author"})]})})]}),Object(T.jsx)(Z.a,{children:Object(T.jsxs)($.a,{sm:6,md:2,children:["Category : "," "]})}),Object(T.jsxs)(y.a,{check:!0,children:[Object(T.jsxs)(Z.a,{children:[Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"romance",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"romance",value:"Romance",name:"cat"}),"Romance"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"fiction",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"fiction",value:"Fiction",name:"cat"}),"Fiction"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"Arts",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Arts",value:"Arts",name:"cat"}),"Arts"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"computer",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"computer",value:"Computer Science",name:"cat"}),"Computer Science"]})})]}),Object(T.jsxs)(Z.a,{children:[Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"management",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"management",value:"Management",name:"cat"}),"Management"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"Physics",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Physics",value:"Physics",name:"cat"}),"Physics"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"technology",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"technology",value:"Technology",name:"cat"}),"Technology"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"Philosophy",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Philosophy",value:"Philosophy",name:"cat"}),"Philosophy"]})})]}),Object(T.jsxs)(Z.a,{children:[Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"Mathematics",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Mathematics",value:"Mathematics",name:"cat"}),"Mathematics"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"Chemistry",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Chemistry",value:"Chemistry",name:"cat"}),"Chemistry"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"Electronics",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Electronics",value:"Electronics",name:"cat"}),"Electronics"]})}),Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"Language",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Language",value:"Language",name:"cat"}),"Language"]})})]}),Object(T.jsx)(Z.a,{children:Object(T.jsx)($.a,{xs:6,md:3,children:Object(T.jsxs)(M.a,{check:!0,for:"Other",children:[Object(T.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Other",value:"Other",name:"cat"}),"Other"]})})})]})]})]})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)(H.a,{children:a})]})}),Object(T.jsx)("br",{})]})}}]),s}(r.Component),X=s(202),ee=s(203),te=s(204),se=s(205),re=s(206),ne=s(207);function ae(e){var t=e.book,s=e.isAdmin,r=e.toggleEditModal,a=e.changeSelected;return null!=t?Object(T.jsxs)(X.a,{children:[Object(T.jsxs)(ee.a,{tag:"h3",children:[t.name," \xa0 \xa0 \xa0\xa0",s?Object(T.jsx)("span",{className:"fa fa-pencil Option",onClick:function(){a(t._id),r()}}):Object(T.jsx)(n.a.Fragment,{})]}),Object(T.jsxs)(te.a,{children:[Object(T.jsxs)(se.a,{align:"right",children:[" - ",t.author]}),Object(T.jsxs)(re.a,{children:[Object(T.jsx)("b",{children:" Category: "})," ",t.cat," ",Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("b",{children:" ISBN number: "})," ",t.isbn," ",Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("b",{children:"Descrption: "}),Object(T.jsx)("br",{})," ",t.description," ",Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("b",{children:" Location: "})," ",Object(T.jsx)("br",{}),"Shelf no. ",t.shelf," ,",Object(T.jsx)("br",{}),0===t.floor?" Ground ":t.floor,1===t.floor?"st ":2===t.floor?"nd ":3===t.floor?"rd ":0===t.floor?"":"th ","Floor ",Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("b",{children:" Copies available : "})," ",t.copies]}),Object(T.jsx)("br",{})]}),Object(T.jsx)(ne.a,{className:"text-muted",children:Object(T.jsxs)(Z.a,{children:[Object(T.jsxs)($.a,{md:6,children:["Created at : ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(Date.parse(t.createdAt)))]}),Object(T.jsxs)($.a,{md:6,children:["Last updated at : ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(Date.parse(t.updatedAt)))]})]})})]}):Object(T.jsx)("div",{})}var ce=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.isLoading?Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})}):this.props.errMess?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.errMess})]})})}):Object(T.jsx)("div",{className:"container full",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),"        ",Object(T.jsx)("br",{}),Object(T.jsx)(ae,{book:this.props.book,isAdmin:this.props.isAdmin,toggleEditModal:this.props.toggleEditModal,changeSelected:this.props.changeSelected}),Object(T.jsx)("br",{})]})})})}}]),s}(r.Component),oe=function(e){return e&&e.length},ie=function(e){return function(t){return!t||t.length<=e}},le=function(e){return function(t){return t&&t.length>=e}},je=function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},de=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={isEditModalOpen:!1,isPasswordModalOpen:!1},r.toggleEditModal=r.toggleEditModal.bind(Object(d.a)(r)),r.togglePasswordModal=r.togglePasswordModal.bind(Object(d.a)(r)),r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"togglePasswordModal",value:function(){this.setState({isPasswordModalOpen:!this.state.isPasswordModalOpen})}},{key:"toggleEditModal",value:function(){this.setState({isEditModalOpen:!this.state.isEditModalOpen})}},{key:"render",value:function(){var e,t=this;return null===this.props.auth.userinfo?Object(T.jsx)("div",{className:"row heading",children:"Failed to fetch. Please reload the page"}):Object(T.jsxs)("div",{className:"container mt-6 home text-center align-self-center",children:[Object(T.jsx)("div",{className:"row text-center justify-content-center",children:Object(T.jsxs)(X.a,{className:"heading",children:[Object(T.jsx)(ee.a,{children:Object(T.jsx)("h3",{children:"My Profile"})}),Object(T.jsxs)(te.a,{children:[Object(T.jsxs)(re.a,{children:[Object(T.jsxs)("h5",{children:[" First Name : ","          "+this.props.auth.userinfo.firstname]}),Object(T.jsxs)("h5",{children:[" Last Name : ","          "+this.props.auth.userinfo.lastname]}),Object(T.jsxs)("h5",{children:[" ",this.props.auth.userinfo.admin?"Admin Id : ":"Roll No."," : ","          "+this.props.auth.userinfo.roll]}),Object(T.jsxs)("h5",{children:[" Email : ","          "+this.props.auth.userinfo.email]})]}),Object(T.jsxs)(b.a,{color:"info",onClick:this.toggleEditModal,children:["Edit \xa0","   ",Object(T.jsx)("span",{className:"fa fa-pencil"})]})," ",this.props.auth.userinfo.admin?Object(T.jsx)("div",{}):Object(T.jsxs)(b.a,{color:"info",onClick:this.togglePasswordModal,children:["Change Password \xa0","   ",Object(T.jsx)("span",{className:"fa fa-key"})]})]})]})}),Object(T.jsxs)(v.a,{isOpen:this.state.isEditModalOpen,toggle:this.toggleEditModal,children:[Object(T.jsx)(N.a,{toggle:this.toggleEditModal,children:"Edit Profile"}),Object(T.jsx)(k.a,{children:Object(T.jsxs)(A.LocalForm,{model:"user",onSubmit:function(e){t.toggleEditModal(),t.props.editUser(t.props.auth.userinfo._id,e.firstname,e.lastname,e.roll,e.email)},children:[Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"firstname",children:"First Name"}),Object(T.jsx)(A.Control.text,{model:".firstname",id:"firstname",name:"firstname",className:"form-control",defaultValue:this.props.auth.userinfo.firstname,placeholder:"firstname",validators:{required:oe,minLength:le(3),maxLength:ie(20)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".firstname",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"lastname",children:"Last Name"}),Object(T.jsx)(A.Control.text,{model:".lastname",id:"lastname",name:"lastname",className:"form-control",defaultValue:this.props.auth.userinfo.lastname,placeholder:"lastname",validators:{required:oe,minLength:le(3),maxLength:ie(20)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".lastname",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"roll",children:"Roll No."}),Object(T.jsx)(A.Control.text,{model:".roll",id:"roll",name:"roll",className:"form-control",defaultValue:this.props.auth.userinfo.roll,placeholder:"roll",validators:{required:oe,minLength:le(3),maxLength:ie(12)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".roll",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 12 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"email",children:"E-mail"}),Object(T.jsx)(A.Control.text,{model:".email",id:"email",name:"email",defaultValue:this.props.auth.userinfo.email,className:"form-control",placeholder:"email",validators:{required:oe,validEmail:je}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".email",show:"touched",messages:{required:"Required",validEmail:" Enter a valid email"}})]}),Object(T.jsx)(b.a,{type:"submit",value:"submit",color:"primary",children:"Submit"})]})})]}),Object(T.jsxs)(v.a,{isOpen:this.state.isPasswordModalOpen,toggle:this.togglePasswordModal,children:[Object(T.jsx)(N.a,{toggle:this.togglePasswordModal,children:"Change Password"}),Object(T.jsx)(k.a,{children:Object(T.jsxs)(A.LocalForm,{model:"passwordform",onSubmit:function(e){e.newpassword===e.confirm?(t.togglePasswordModal(),t.props.editPassword(t.props.auth.userinfo._id,t.props.auth.user.username,e.newpassword)):alert("Your passwords didn't match. Please try again")},children:[Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"password",children:"Current Password"}),Object(T.jsx)(A.Control.password,{model:".password",id:"password",name:"password",className:"form-control",placeholder:"password",validators:{required:oe,minLength:le(6),maxLength:ie(20),matchcreds:(e=this.props.auth.user.password,function(t){return t===e})}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".password",show:"touched",messages:{required:"Required",minLength:" Must be greater than 5 characters",maxLength:" Must be 20 characters or less",matchcreds:" Enter the correct password"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"newpassword",children:"New password"}),Object(T.jsx)(A.Control.password,{model:".newpassword",id:"newpassword",name:"newpassword",className:"form-control",placeholder:"New Password",validators:{required:oe,minLength:le(6),maxLength:ie(20)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".newpassword",show:"touched",messages:{required:"Required",minLength:" Must be greater than 5 characters",maxLength:" Must be 20 characters or less"}})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(M.a,{htmlFor:"confirm",children:"Confirm Password"}),Object(T.jsx)(A.Control.password,{model:".confirm",id:"confirm",name:"confirm",className:"form-control",placeholder:"Re-enter the new password",validators:{required:oe,minLength:le(6),maxLength:ie(20)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".confirm",show:"touched",messages:{required:"Required",minLength:" Must be greater than 5 characters",maxLength:" Must be 20 characters or less"}})]}),Object(T.jsx)(b.a,{type:"submit",value:"submit",color:"primary",children:"Submit"})]})})]})]})}}]),s}(r.Component),he=function(e){return e&&e.length},ue=function(e){return!!e},be=function(e){return function(t){return t&&t.length>=e}},me=function(e){return function(t){return!t||t<=e}},Oe=function(e){return function(t){return t&&t>=e}},xe=function(e){return!isNaN(Number(e))},pe=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e,t=this;return this.props.booksLoading?Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})}):this.props.booksErrMess?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.booksErrMess})]})})}):Object(T.jsxs)("div",{className:"container",children:[Object(T.jsx)("div",{className:"row justify-content-center heading",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("h3",{align:"center",children:"  Add a book"})})}),Object(T.jsx)("div",{className:"row row-content justify-content-center",children:Object(T.jsxs)(A.LocalForm,{onSubmit:function(e){t.props.postBook(e.name,e.author,e.description,e.isbn,e.cat,e.floor,e.shelf,e.copies)},children:[Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"name",md:2,children:"Name "}),Object(T.jsxs)($.a,{md:4,children:[Object(T.jsx)(A.Control.text,{model:".name",id:"name",name:"name",placeholder:"Name of book",className:"form-control",validators:{required:he,minLength:be(3),uniqueName:function(e){return!t.props.books.some((function(t){return t.name===e}))}}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".name",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",uniqueName:" There exists a book with this name already"}})]}),Object(T.jsx)(M.a,{htmlFor:"author",md:2,children:"Authors "}),Object(T.jsxs)($.a,{md:4,children:[Object(T.jsx)(A.Control.text,{model:".author",id:"author",name:"author",placeholder:"Name of authors",className:"form-control",validators:{required:he,minLength:be(3)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".author",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters"}})]})]}),Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"isbn",md:2,children:"ISBN No."}),Object(T.jsxs)($.a,{md:4,children:[Object(T.jsx)(A.Control.text,{model:".isbn",id:"isbn",name:"isbn",placeholder:"ISBN no. of book",className:"form-control",validators:{required:he,minLength:be(10),maxLength:(e=13,function(t){return!t||t.length<=e}),isNumber:xe,uniqueIsbn:function(e){return!t.props.books.some((function(t){return t.isbn===e}))}}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".isbn",show:"touched",messages:{required:"Required",minLength:" Must be greater than 9 numbers",maxLength:" Must be 13 numbers or less",isNumber:" Must be a number",uniqueIsbn:" There exists a book with this ISBN No."}})]}),Object(T.jsx)(M.a,{htmlFor:"copies",md:3,children:" Copies Available"}),Object(T.jsxs)($.a,{md:3,children:[Object(T.jsx)(A.Control.text,{model:".copies",id:"copies",name:"copies",placeholder:"Number of copies available",className:"form-control",validators:{requiredNum:ue,minVal:Oe(1),maxVal:me(1e3),isNumber:xe}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".copies",show:"touched",messages:{requiredNum:"Required",minVal:" Must be greater than 0",maxVal:" Must be 1000 or less",isNumber:" Must be a number"}})]})]}),Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsxs)($.a,{children:[Object(T.jsx)(M.a,{htmlFor:"cat",children:"Category"}),Object(T.jsxs)(A.Control.select,{defaultValue:"Romance",model:".cat",id:"cat",className:"form-control",children:[Object(T.jsx)("option",{children:"Romance"})," ",Object(T.jsx)("option",{children:"Technology"}),Object(T.jsx)("option",{children:"Computer Science"})," ",Object(T.jsx)("option",{children:"Management"}),Object(T.jsx)("option",{children:"Electronics"})," ",Object(T.jsx)("option",{children:"Physics"}),Object(T.jsx)("option",{children:"Chemistry"})," ",Object(T.jsx)("option",{children:"Mathematics"}),Object(T.jsx)("option",{children:"Fiction"})," ",Object(T.jsx)("option",{children:"Philosophy"}),Object(T.jsx)("option",{children:"Language"})," ",Object(T.jsx)("option",{children:"Arts"}),Object(T.jsx)("option",{children:"Other"})]})]}),Object(T.jsxs)($.a,{children:[Object(T.jsx)(M.a,{htmlFor:"floor",children:"Floor "}),Object(T.jsxs)(A.Control.select,{defaultValue:0,model:".floor",id:"floor",className:"form-control",children:[Object(T.jsx)("option",{children:"0"})," ",Object(T.jsx)("option",{children:"1"}),Object(T.jsx)("option",{children:"2"})," ",Object(T.jsx)("option",{children:"3"}),Object(T.jsx)("option",{children:"4"})," ",Object(T.jsx)("option",{children:"5"}),Object(T.jsx)("option",{children:"6"})," ",Object(T.jsx)("option",{children:"7"}),Object(T.jsx)("option",{children:"8"})]})]})]}),Object(T.jsxs)(Z.a,{className:"form-group text-center justify-content-center",children:[Object(T.jsx)(M.a,{htmlFor:"shelf",md:3,children:" Shelf"}),Object(T.jsxs)($.a,{md:6,children:[Object(T.jsx)(A.Control.text,{model:".shelf",id:"shelf",name:"shelf",placeholder:"Shelf no. for locating book",className:"form-control",validators:{requiredNum:ue,minVal:Oe(1),maxVal:me(100),isNumber:xe}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".shelf",show:"touched",messages:{requiredNum:"Required",minVal:" Must be greater than 0",maxVal:" Must be 100 or less",isNumber:" Must be a number"}})]})]}),Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"description",md:2,children:"Description"}),Object(T.jsx)($.a,{md:10,children:Object(T.jsx)(A.Control.textarea,{model:".description",id:"description",name:"description",rows:"12",placeholder:"Some description of the book",className:"form-control"})})]}),Object(T.jsx)(Z.a,{className:"align-self-center",children:Object(T.jsx)($.a,{className:"text-center",children:Object(T.jsx)(b.a,{type:"submit",className:"bg-primary",children:"Submit"})})})]})}),Object(T.jsx)("br",{})]})}}]),s}(r.Component),fe=0;function ge(e){var t=e.issue,s=e.i,r=[],a=new Date;r.push(a);var c=new Date(Date.parse(t.createdAt)),o=new Date(Date.parse(t.createdAt));o.setDate(o.getDate()+30),r.push(o);var i=t.returned?new Date(Date.parse(t.updatedAt)):new Date(Math.min.apply(null,r)),l=50;return(i.getTime()-c.getTime())/864e5>15&&(l=50*Math.floor((i.getTime()-c.getTime())/864e5)),fe+=l,Object(T.jsxs)(n.a.Fragment,{children:[Object(T.jsx)("td",{children:s}),Object(T.jsx)("td",{children:Object(T.jsx)(I.b,{to:"/books/".concat(t.book._id),children:t.book.name})}),Object(T.jsx)("td",{children:t.book.isbn}),Object(T.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(t.createdAt)))}),Object(T.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(o)}),Object(T.jsx)("td",{children:t.returned?"Returned on "+new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(i))):"Not returned yet"}),Object(T.jsx)("td",{children:l})]})}var ve=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(this.props.issues.isLoading)return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})});if(this.props.issues.errMess)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.errMess})]})})});if(0===this.props.issues.issues.length)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12 text-center",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h4",{children:"You have not issued any books."}),Object(T.jsx)("h4",{children:"Request admin to issue a book"})]})})});var t=this.props.issues.issues.map((function(t){return Object(T.jsx)("tr",{children:Object(T.jsx)(ge,{issue:t,i:e.i++})},t._id)}));return Object(T.jsx)("div",{className:"container mt-6 text-center align-self-center full",children:Object(T.jsx)("div",{className:"row text-center justify-content-center",children:Object(T.jsxs)("div",{className:"col-12 heading",children:[Object(T.jsx)("h3",{children:"Issue History"}),Object(T.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"S.No."}),Object(T.jsx)("th",{children:"Name of Book"}),Object(T.jsx)("th",{children:"ISBN number"}),Object(T.jsx)("th",{children:"Issue Date"}),Object(T.jsx)("th",{children:"Return Date"}),Object(T.jsx)("th",{children:"Return status"}),Object(T.jsx)("th",{children:"Fine (in Rs.)"})]})}),Object(T.jsx)("tbody",{children:t})]}),Object(T.jsx)("br",{}),Object(T.jsxs)("h6",{children:[" Total Fine due (if all pending books are returned today) : Rs. ",fe," "]}),Object(T.jsx)("br",{})]})})})}}]),s}(r.Component),Ne=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={isbn:"",roll:""},r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(this.props.booksLoading||this.props.usersLoading)return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})});if(this.props.booksErrMess)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.booksErrMess})]})})});if(this.props.usersErrMess)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.usersErrMess})]})})});var t=this.props.books.map((function(e,t){return Object(T.jsx)("option",{children:e.isbn},e.isbn)})),s=this.props.books[0],r=this.props.users.filter((function(e){return!e.admin})),n=r[0];return r=r.map((function(e,t){return Object(T.jsx)("option",{children:e.roll},e.roll)})),""===this.state.isbn&&this.setState({isbn:s.isbn,roll:n.roll}),Object(T.jsxs)("div",{className:"container full",children:[Object(T.jsx)("div",{className:"row justify-content-center heading",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("h3",{align:"center",children:"  Issue book"})})}),Object(T.jsx)("div",{className:"row row-content justify-content-center",children:Object(T.jsxs)(w.a,{onSubmit:function(t){var s=e.props.books.filter((function(t){return t.isbn===e.state.isbn}))[0]._id,r=e.props.users.filter((function(t){return t.roll===e.state.roll}))[0]._id;e.props.postIssue(s,r),t.preventDefault()},children:[Object(T.jsxs)(y.a,{row:!0,children:[Object(T.jsx)(M.a,{htmlFor:"isbn",children:" ISBN No. of book"}),Object(T.jsx)(E.a,{type:"select",defaultValue:s.name,name:"isbn",id:"isbn",className:"form-control",onInput:function(t){e.setState({isbn:t.target.value})},children:t})]}),Object(T.jsxs)(y.a,{row:!0,children:[Object(T.jsx)(M.a,{htmlFor:"roll",children:" Roll No. of student "}),Object(T.jsx)(E.a,{type:"select",id:"roll",className:"form-control",onInput:function(t){e.setState({roll:t.target.value})},children:r})]}),Object(T.jsxs)(y.a,{row:!0,children:[Object(T.jsx)(M.a,{htmlFor:"name",children:" Name of book "}),Object(T.jsx)(E.a,{type:"text",id:"name",name:"name",placeholder:"Name of Book",defaultValue:s.name,value:this.state.isbn?this.props.books.filter((function(t){return t.isbn===e.state.isbn}))[0].name:"",className:"form-control",disabled:!0})]}),Object(T.jsxs)(y.a,{row:!0,children:[Object(T.jsx)(M.a,{htmlFor:"author",children:" Authors "}),Object(T.jsx)(E.a,{type:"text",id:"author",name:"author",placeholder:"Name of authors",defaultValue:s.author,value:this.state.isbn?this.props.books.filter((function(t){return t.isbn===e.state.isbn}))[0].author:"",className:"form-control",disabled:!0})]}),Object(T.jsxs)(y.a,{row:!0,children:[Object(T.jsx)(M.a,{htmlFor:"name_student",children:" Name of student "}),Object(T.jsx)(E.a,{type:"text",id:"name_student",name:"name_student",placeholder:"Name of student",defaultValue:n.firstname+" "+n.lastname,value:this.state.roll?this.props.users.filter((function(t){return t.roll===e.state.roll}))[0].firstname+" "+this.props.users.filter((function(t){return t.roll===e.state.roll}))[0].lastname:"",className:"form-control",disabled:!0})]}),Object(T.jsxs)(y.a,{row:!0,children:[Object(T.jsx)(M.a,{htmlFor:"username",children:" Username of student "}),Object(T.jsx)(E.a,{type:"text",id:"username",name:"username",placeholder:"Username of student",defaultValue:n.username,value:this.state.roll?this.props.users.filter((function(t){return t.roll===e.state.roll}))[0].username:"",className:"form-control",disabled:!0})]}),Object(T.jsx)(Z.a,{className:"align-self-center",children:Object(T.jsx)($.a,{className:"text-center",children:Object(T.jsx)(b.a,{type:"submit",className:"bg-primary",children:"Submit"})})})]})}),Object(T.jsx)("br",{})]})}}]),s}(r.Component),ke=0;function we(e){var t=e.issue,s=e.i,r=e.returnBook,a=[],c=new Date;a.push(c);var o=new Date(Date.parse(t.createdAt)),i=new Date(Date.parse(t.createdAt));i.setDate(i.getDate()+30),a.push(i);var l=t.returned?new Date(Date.parse(t.updatedAt)):new Date(Math.min.apply(null,a)),j=0;return(l.getTime()-o.getTime())/864e5>15&&(j=50*Math.floor((l.getTime()-o.getTime())/864e5)),ke+=j,Object(T.jsxs)(n.a.Fragment,{children:[Object(T.jsx)("td",{children:s}),Object(T.jsx)("td",{children:Object(T.jsx)(I.b,{to:"/users/".concat(t.student._id),children:t.student.firstname+" "+t.student.lastname})}),Object(T.jsx)("td",{children:t.student.roll}),Object(T.jsx)("td",{children:null==t.book?"N/A":Object(T.jsx)(I.b,{to:"/books/".concat(t.book._id),children:t.book.name})}),Object(T.jsx)("td",{children:null==t.book?"N/A":t.book.isbn}),Object(T.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(t.createdAt)))}),Object(T.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(i)}),Object(T.jsx)("td",{children:j}),Object(T.jsx)("td",{children:Object(T.jsx)(b.a,{color:"info",onClick:function(){r(t._id)},children:"Return"})})]})}var ye=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(console.log(this.props.issues),this.props.issues.isLoading)return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})});if(this.props.issues.errMess)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.errMess})]})})});if(0===this.props.issues.issues.length)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12 text-center",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h4",{children:"All books have been returned."})]})})});var t=this.props.issues.issues.filter((function(e){return!e.returned})).map((function(t){return Object(T.jsx)("tr",{children:Object(T.jsx)(we,{issue:t,i:e.i++,returnBook:e.props.returnIssue})},t._id)}));return Object(T.jsx)("div",{className:"container mt-6 text-center align-self-center full",children:Object(T.jsx)("div",{className:"row text-center justify-content-center",children:Object(T.jsxs)("div",{className:"col-12 heading",children:[Object(T.jsx)("h3",{children:"List of books not returned"}),Object(T.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"S.No."}),Object(T.jsx)("th",{children:"Name of Student"}),Object(T.jsx)("th",{children:"Roll No."}),Object(T.jsx)("th",{children:"Name of Book"}),Object(T.jsx)("th",{children:"ISBN number"}),Object(T.jsx)("th",{children:"Issue Date"}),Object(T.jsx)("th",{children:"Return Date"}),Object(T.jsx)("th",{children:"Fine (in Rs.)"}),Object(T.jsx)("th",{children:"Return book"})]})}),Object(T.jsx)("tbody",{children:t})]}),Object(T.jsx)("br",{}),Object(T.jsxs)("h6",{children:[" ","Total Fine due (if all pending books are returned today) : Rs."," ",ke," "]}),Object(T.jsx)("br",{})]})})})}}]),s}(r.Component),Me=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.isLoading?Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})}):this.props.errMess?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.errMess})]})})}):Object(T.jsx)("div",{className:"container mt-6 home text-center align-self-center",children:Object(T.jsx)("div",{className:"row text-center justify-content-center",children:Object(T.jsxs)(X.a,{className:"heading",children:[Object(T.jsx)(ee.a,{children:Object(T.jsx)("h3",{children:"User Details"})}),Object(T.jsx)(te.a,{children:Object(T.jsxs)(re.a,{children:[Object(T.jsxs)("h5",{children:[" First Name : ","          "+this.props.user.firstname]}),Object(T.jsxs)("h5",{children:[" Last Name : ","          "+this.props.user.lastname]}),Object(T.jsxs)("h5",{children:[" ",this.props.user.admin?"Admin Id : ":"Roll No."," : ","          "+this.props.user.roll]}),Object(T.jsxs)("h5",{children:[" Email : ","          "+this.props.user.email]}),Object(T.jsxs)("h5",{children:[" Username : ","          "+this.props.user.username]})]})})]})})})}}]),s}(r.Component),Ee=s(208),Se=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.issues.isLoading||this.props.booksLoading||this.props.usersLoading?Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})}):this.props.issues.errMess?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.issues.errMess})]})})}):this.props.usersErrMess?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.usersErrMess})]})})}):this.props.booksErrMess?Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.booksErrMess})]})})}):Object(T.jsxs)("div",{className:"container mt-6 text-center align-self-center full",children:[Object(T.jsx)("div",{className:"row text-center justify-content-center heading",children:Object(T.jsx)("div",{className:"col-12",children:Object(T.jsx)("h3",{children:"Stats"})})}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(T.jsx)(X.a,{children:Object(T.jsxs)(te.a,{children:[Object(T.jsx)(se.a,{children:Object(T.jsx)("h1",{children:this.props.books.length})}),Object(T.jsx)(re.a,{children:"Different books available"}),Object(T.jsx)(Ee.a,{tag:I.b,to:"/books",children:Object(T.jsxs)(b.a,{color:"info",children:[Object(T.jsx)("i",{className:"fa fa-eye fa-lg"})," ","\xa0View"]})})]})})}),Object(T.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(T.jsx)(X.a,{children:Object(T.jsxs)(te.a,{children:[Object(T.jsx)(se.a,{children:Object(T.jsx)("h1",{children:this.props.issues.issues.length})}),Object(T.jsx)(re.a,{children:"Books Issued"}),Object(T.jsx)(Ee.a,{tag:I.b,to:"/logs",children:Object(T.jsxs)(b.a,{color:"info",children:[Object(T.jsx)("i",{className:"fa fa-eye fa-lg"})," ","\xa0View"]})})]})})}),Object(T.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(T.jsx)(X.a,{children:Object(T.jsxs)(te.a,{children:[Object(T.jsx)(se.a,{children:Object(T.jsx)("h1",{children:this.props.issues.issues.filter((function(e){return!e.returned})).length})}),Object(T.jsx)(re.a,{children:"Books not yet returned"}),Object(T.jsx)(Ee.a,{children:Object(T.jsxs)(b.a,{tag:I.b,to:"/return",color:"info",children:[Object(T.jsx)("i",{className:"fa fa-eye fa-lg"})," ","\xa0View"]})})]})})}),Object(T.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(T.jsx)(X.a,{children:Object(T.jsxs)(te.a,{children:[Object(T.jsx)(se.a,{children:Object(T.jsx)("h1",{children:this.props.users.filter((function(e){return!e.admin})).length})}),Object(T.jsx)(re.a,{children:"Students registered"}),Object(T.jsx)(Ee.a,{tag:I.b,to:"/list_students",children:Object(T.jsxs)(b.a,{color:"info",children:[Object(T.jsx)("i",{className:"fa fa-eye fa-lg"})," ","\xa0View"]})})]})})}),Object(T.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(T.jsx)(X.a,{children:Object(T.jsxs)(te.a,{children:[Object(T.jsx)(se.a,{children:Object(T.jsx)("h1",{children:this.props.users.filter((function(e){return e.admin})).length})}),Object(T.jsx)(re.a,{children:"Administrators in-charge"}),Object(T.jsx)(Ee.a,{tag:I.b,to:"/list_admins",children:Object(T.jsxs)(b.a,{color:"info",children:[Object(T.jsx)("i",{className:"fa fa-eye fa-lg"})," ","\xa0View"]})})]})})})]}),Object(T.jsx)("br",{})]})}}]),s}(r.Component);function Le(e){var t=e.issue,s=e.i,r=[],a=new Date;r.push(a);var c=new Date(Date.parse(t.createdAt)),o=new Date(Date.parse(t.createdAt));o.setDate(o.getDate()+30),r.push(o);var i=t.returned?new Date(Date.parse(t.updatedAt)):new Date(Math.min.apply(null,r)),l=0;return(i.getTime()-c.getTime())/864e5>30&&(l=1*Math.floor((i.getTime()-c.getTime())/864e5)),Object(T.jsxs)(n.a.Fragment,{children:[Object(T.jsx)("td",{children:s}),Object(T.jsx)("td",{children:Object(T.jsx)(I.b,{to:"/users/".concat(t.student._id),children:t.student.firstname+" "+t.student.lastname})}),Object(T.jsx)("td",{children:t.student.roll}),Object(T.jsx)("td",{children:null==t.book?"N/A":Object(T.jsx)(I.b,{to:"/books/".concat(t.book._id),children:t.book.name})}),Object(T.jsx)("td",{children:null==t.book?"N/A":t.book.isbn}),Object(T.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(t.createdAt)))}),Object(T.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(o)}),Object(T.jsx)("td",{children:t.returned?"Returned on "+new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(i))):"Not returned yet"}),Object(T.jsx)("td",{children:l})]})}var Ce=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(this.props.issues.isLoading)return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})});if(this.props.issues.errMess)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.errMess})]})})});if(0===this.props.issues.issues.length)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12 text-center",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h4",{children:"You have not issued any books."}),Object(T.jsx)("h4",{children:"Request admin to issue a book"})]})})});var t=this.props.issues.issues.map((function(t){return Object(T.jsx)("tr",{children:Object(T.jsx)(Le,{issue:t,i:e.i++})},t._id)}));return Object(T.jsx)("div",{className:"container mt-6 text-center align-self-center full",children:Object(T.jsx)("div",{className:"row text-center justify-content-center",children:Object(T.jsxs)("div",{className:"col-12 heading",children:[Object(T.jsx)("h3",{children:"Issue Log"}),Object(T.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"S.No."}),Object(T.jsx)("th",{children:"Name of Student"}),Object(T.jsx)("th",{children:"Roll No."}),Object(T.jsx)("th",{children:"Name of Book"}),Object(T.jsx)("th",{children:"ISBN number"}),Object(T.jsx)("th",{children:"Issue Date"}),Object(T.jsx)("th",{children:"Return Deadline"}),Object(T.jsx)("th",{children:"Return status"}),Object(T.jsx)("th",{children:"Fine (in Rs.)"})]})}),Object(T.jsx)("tbody",{children:t})]}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{})]})})})}}]),s}(r.Component);function De(e){var t=e.user,s=e.i;return Object(T.jsxs)(n.a.Fragment,{children:[Object(T.jsx)("td",{children:s}),Object(T.jsx)("td",{children:Object(T.jsx)(I.b,{to:"/users/".concat(t._id),children:t.firstname+" "+t.lastname})}),Object(T.jsx)("td",{children:t.roll}),Object(T.jsx)("td",{children:t.username}),Object(T.jsx)("td",{children:t.email})]})}var Ie=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(this.props.usersLoading)return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsx)(Y,{})})});if(this.props.usersErrMess)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h3",{children:this.props.errMess})]})})});if(0===this.props.users.length)return Object(T.jsx)("div",{className:"container loading",children:Object(T.jsx)("div",{className:"row heading",children:Object(T.jsxs)("div",{className:"col-12 text-center",children:[Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)("h4",{children:"No users found"})]})})});var t=this.props.users.map((function(t){return Object(T.jsx)("tr",{children:Object(T.jsx)(De,{user:t,i:e.i++})},t._id)}));return Object(T.jsx)("div",{className:"container mt-6 text-center align-self-center full",children:Object(T.jsx)("div",{className:"row text-center justify-content-center",children:Object(T.jsxs)("div",{className:"col-12 heading",children:[Object(T.jsxs)("h3",{children:["List of ",this.props.users[0].admin?" admins in-charge":" students registered"]}),Object(T.jsxs)(J.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"S.No."}),Object(T.jsxs)("th",{children:["Name of ",this.props.users[0].admin?" admin":" student"]}),Object(T.jsx)("th",{children:this.props.users[0].admin?" Admin Id":" Roll No."}),Object(T.jsx)("th",{children:"Username"}),Object(T.jsx)("th",{children:"Email"})]})}),Object(T.jsx)("tbody",{children:t})]}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{})]})})})}}]),s}(r.Component),Ae=s(18),Te=s(29),Fe="BOOKS_LOADING",Re="BOOKS_FAILED",Be="ADD_BOOKS",qe="ADD_BOOK",_e="EDIT_BOOK",Ue="DELETE_BOOK",Pe="LOGIN_REQUEST",Ve="LOGIN_SUCCESS",Je="LOGIN_FAILURE",Ye="LOGOUT_REQUEST",ze="LOGOUT_SUCCESS",Ge="EDIT_USER",Ke="EDIT_PASSWORD",We="ISSUES_LOADING",Ze="ISSUES_FAILED",$e="ADD_ISSUES",He="ADD_ISSUE",Qe="RETURN_ISSUE",Xe="USERS_LOADING",et="USERS_FAILED",tt="ADD_USERS",st="/api/",rt=function(e,t,s,r,n,a,c,o){return function(i){var l={name:e,author:t,description:s,isbn:r,cat:n,floor:a,shelf:c,copies:o},j="Bearer "+localStorage.getItem("token");return fetch("/api/books",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:j}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return alert("Book added successfully"),i({type:qe,payload:e})})).catch((function(e){alert("Your book could not be added\nError: "+e.message)}))}},nt=function(){return function(e){var t="Bearer "+localStorage.getItem("token");return e(lt(!0)),fetch("/api/users",{headers:{Authorization:t}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(it(t))})).catch((function(t){return e(vt(t.message))}))}},at=function(){return{type:Fe}},ct=function(e){return{type:Re,payload:e}},ot=function(e){return{type:Be,payload:e}},it=function(e){return{type:tt,payload:e}},lt=function(){return{type:Xe}},jt=function(e){return{type:_e,payload:e}},dt=function(e){return{type:Ge,payload:e}},ht=function(e){return{type:Ke,payload:e}},ut=function(e){return{type:Ue,payload:e}},bt=function(e){return function(t){return t(function(e){return{type:Pe,creds:e}}(e)),fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(s){if(!s.success){var r=new Error("Error "+s.status);throw r.response=s,r}localStorage.setItem("token",s.token),localStorage.setItem("creds",JSON.stringify(e)),localStorage.setItem("userinfo",JSON.stringify(s.userinfo)),t(xt(!s.userinfo.admin)),s.userinfo.admin&&t(nt()),setTimeout((function(){Nt(),alert("Your JWT token has expired. \nPlease log in again to continue.")}),36e5),t(function(e){return{type:Ve,token:e.token,userinfo:e.userinfo}}(s))})).catch((function(e){return alert(e.message+"\nUsername and password didn't match"),t((s=e.message,{type:Je,message:s}));var s}))}},mt=function(e,t){return function(s){var r={book:e,student:t},n="Bearer "+localStorage.getItem("token");return fetch("/api/issues",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:n}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return alert("Book issued successfully"),s({type:He,payload:e})})).catch((function(e){alert("Book could not be issued\nError: "+e.message+"\nMay be the student has already issued 3 books and not returned. Please return them first. \nor the book may not available. You can wait for some days, until the book is returned to library.")}))}},Ot=function(e){return function(t){var s="Bearer "+localStorage.getItem("token");return fetch("/api/issues/"+e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:s}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return alert("Book returned successfully"),t({type:Qe,payload:e})})).catch((function(e){alert("The book could not be returned\nError: "+e.message)}))}},xt=function(e){return function(t){var s,r="Bearer "+localStorage.getItem("token");return s=e?"issues/student":"issues",t(pt(!0)),fetch(st+s,{headers:{Authorization:r}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return t(gt(e))})).catch((function(e){return t(ft(e.message))}))}},pt=function(){return{type:We}},ft=function(e){return{type:Ze,payload:e}},gt=function(e){return{type:$e,payload:e}},vt=function(e){return{type:et,payload:e}},Nt=function(){return function(e){e({type:Ye}),localStorage.removeItem("token"),localStorage.removeItem("creds"),localStorage.removeItem("userinfo"),e({type:ze})}},kt=["component"],wt=["component"],yt=["component"],Mt=function(e){return e&&e.length},Et=function(e){return!!e},St=function(e){return function(t){return t&&t.length>=e}},Lt=function(e){return function(t){return!t||t<=e}},Ct=function(e){return function(t){return t&&t>=e}},Dt=function(e){return!isNaN(Number(e))},It=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={isDeleteModalOpen:!1,isEditModalOpen:!1,selectedBook:null},r.toggleDeleteModal=r.toggleDeleteModal.bind(Object(d.a)(r)),r.toggleEditModal=r.toggleEditModal.bind(Object(d.a)(r)),r.changeSelected=r.changeSelected.bind(Object(d.a)(r)),r.handleSubmitEdit=r.handleSubmitEdit.bind(Object(d.a)(r)),r}return Object(j.a)(s,[{key:"componentDidMount",value:function(){this.props.fetchBooks(),this.props.auth.isAuthenticated&&this.props.fetchIssues(!this.props.auth.userinfo.admin),this.props.auth.isAuthenticated&&this.props.auth.userinfo.admin&&this.props.fetchUsers()}},{key:"handleSubmitEdit",value:function(e){this.toggleEditModal(),this.props.editBook(this.state.selectedBook._id,e.name,e.author,e.description,e.isbn,e.cat,e.floor,e.shelf,e.copies)}},{key:"changeSelected",value:function(e){this.setState({selectedBook:this.props.books.books.filter((function(t){return t._id===e}))[0]})}},{key:"toggleDeleteModal",value:function(){this.setState({isDeleteModalOpen:!this.state.isDeleteModalOpen})}},{key:"toggleEditModal",value:function(){this.setState({isEditModalOpen:!this.state.isEditModalOpen})}},{key:"render",value:function(){var e,t,s,r=this,a=function(e){var t=e.component,s=Object(i.a)(e,kt);return Object(T.jsx)(Ae.b,Object(o.a)(Object(o.a)({},s),{},{render:function(e){return r.props.auth.isAuthenticated?Object(T.jsx)(t,Object(o.a)({},e)):Object(T.jsx)(Ae.a,{to:{pathname:"/home",state:{from:e.location}}})}}))},c=function(e){var t=e.component,s=Object(i.a)(e,wt);return Object(T.jsx)(Ae.b,Object(o.a)(Object(o.a)({},s),{},{render:function(e){return r.props.auth.isAuthenticated&&r.props.auth.userinfo.admin?Object(T.jsx)(t,Object(o.a)({},e)):Object(T.jsx)(Ae.a,{to:{pathname:"/home",state:{from:e.location}}})}}))},l=function(e){var t=e.component,s=Object(i.a)(e,yt);return Object(T.jsx)(Ae.b,Object(o.a)(Object(o.a)({},s),{},{render:function(e){return r.props.auth.isAuthenticated&&!r.props.auth.userinfo.admin?Object(T.jsx)(t,Object(o.a)({},e)):Object(T.jsx)(Ae.a,{to:{pathname:"/home",state:{from:e.location}}})}}))};return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(U,{auth:this.props.auth,loginUser:this.props.loginUser,logoutUser:this.props.logoutUser,registerUser:this.props.registerUser}),Object(T.jsxs)(Ae.d,{location:this.props.location,children:[Object(T.jsx)(Ae.b,{exact:!0,path:"/home",component:function(){return Object(T.jsx)(V,{})}}),Object(T.jsx)(Ae.b,{exact:!0,path:"/search",component:function(){return Object(T.jsx)(Q,{books:r.props.books.books,booksLoading:r.props.books.isLoading,booksErrMess:r.props.books.errMess,isSignedIn:r.props.auth.isAuthenticated,isAdmin:null!=r.props.auth.userinfo&&r.props.auth.userinfo.admin,toggleEditModal:r.toggleEditModal,toggleDeleteModal:r.toggleDeleteModal,changeSelected:r.changeSelected})}}),Object(T.jsx)(Ae.b,{exact:!0,path:"/books",component:function(){return Object(T.jsx)(G,{books:r.props.books.books,booksLoading:r.props.books.isLoading,booksErrMess:r.props.books.errMess,isSignedIn:r.props.auth.isAuthenticated,isAdmin:null!=r.props.auth.userinfo&&r.props.auth.userinfo.admin,auth:r.props.auth,toggleEditModal:r.toggleEditModal,toggleDeleteModal:r.toggleDeleteModal,changeSelected:r.changeSelected})}}),Object(T.jsx)(Ae.b,{path:"/books/:bookId",component:function(e){var t=e.match,s=r.props.books.books.filter((function(e){return e._id===t.params.bookId}))[0],n=null;return void 0===s&&(n="\n\n Error 404 :  Book not found"),Object(T.jsx)(ce,{book:s,isLoading:r.props.books.isLoading,errMess:r.props.books.errMess||n,toggleEditModal:r.toggleEditModal,changeSelected:r.changeSelected,isAdmin:null!=r.props.auth.userinfo&&r.props.auth.userinfo.admin})}}),Object(T.jsx)(a,{exact:!0,path:"/profile",component:function(){return Object(T.jsx)(de,{auth:r.props.auth,editUser:r.props.editUser,editPassword:r.props.editPassword})}}),Object(T.jsx)(c,{exact:!0,path:"/add_book",component:function(){return Object(T.jsx)(pe,{isAdmin:null!=r.props.auth.userinfo&&r.props.auth.userinfo.admin,postBook:r.props.postBook,books:r.props.books.books,booksLoading:r.props.books.isLoading,booksErrMess:r.props.books.errMess})}}),Object(T.jsx)(l,{exact:!0,path:"/profile",component:function(){return Object(T.jsx)(de,{auth:r.props.auth,editUser:r.props.editUser})}}),Object(T.jsx)(l,{exact:!0,path:"/history",component:function(){return Object(T.jsx)(ve,{issues:r.props.issues,auth:r.props.auth})}}),Object(T.jsx)(c,{exact:!0,path:"/logs",component:function(){return Object(T.jsx)(Ce,{issues:r.props.issues})}}),Object(T.jsx)(c,{exact:!0,path:"/list_students",component:function(){return Object(T.jsx)(Ie,{users:r.props.users.users.filter((function(e){return!e.admin})),usersLoading:r.props.users.isLoading,usersErrMess:r.props.users.errMess})}}),Object(T.jsx)(c,{exact:!0,path:"/list_admins",component:function(){return Object(T.jsx)(Ie,{users:r.props.users.users.filter((function(e){return e.admin})),usersLoading:r.props.users.isLoading,usersErrMess:r.props.users.errMess})}}),Object(T.jsx)(c,{exact:!0,path:"/issue",component:function(){return Object(T.jsx)(Ne,{auth:r.props.auth,books:r.props.books.books,booksLoading:r.props.books.isLoading,booksErrMess:r.props.books.errMess,users:r.props.users.users,usersLoading:r.props.users.isLoading,usersErrMess:r.props.users.errMess,postIssue:r.props.postIssue})}}),Object(T.jsx)(c,{exact:!0,path:"/return",component:function(){return Object(T.jsx)(ye,{issues:r.props.issues,auth:r.props.auth,returnIssue:r.props.returnIssue})}}),Object(T.jsx)(c,{path:"/users/:userId",component:function(e){var t=e.match,s=r.props.users.users.filter((function(e){return e._id===t.params.userId}))[0],n=null;return void 0===s&&(n="\n\n Error 404 :  User not found"),Object(T.jsx)(Me,{user:s,isLoading:r.props.users.isLoading,errMess:r.props.users.errMess||n})}}),Object(T.jsx)(c,{path:"/stats",component:function(){return Object(T.jsx)(Se,{issues:r.props.issues,books:r.props.books.books,booksLoading:r.props.books.isLoading,booksErrMess:r.props.books.errMess,users:r.props.users.users,usersLoading:r.props.users.isLoading,usersErrMess:r.props.users.errMess})}}),Object(T.jsx)(Ae.a,{to:"/home"})]}),Object(T.jsx)(P,{}),Object(T.jsxs)(v.a,{isOpen:this.state.isDeleteModalOpen,toggle:this.toggleDeleteModal,children:[Object(T.jsx)(N.a,{toggle:this.toggleDeleteModal,children:"Confirm Deletion"}),Object(T.jsxs)(k.a,{children:["Book details : ",Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),"Name : ",this.state.selectedBook?this.state.selectedBook.name:""," ",Object(T.jsx)("br",{}),"Authors : ",this.state.selectedBook?this.state.selectedBook.author:""," ",Object(T.jsx)("br",{}),"ISBN Number : ",this.state.selectedBook?this.state.selectedBook.isbn:""," ",Object(T.jsx)("br",{}),"Available Copies : ",this.state.selectedBook?this.state.selectedBook.copies:""," ",Object(T.jsx)("br",{})," ",Object(T.jsx)("br",{}),"Are you sure you wish to delete this book ? ",Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)(b.a,{color:"danger",onClick:function(){r.props.deleteBook(r.state.selectedBook._id),r.toggleDeleteModal()},children:"Yes"})," ",Object(T.jsx)(b.a,{color:"warning",onClick:function(){r.toggleDeleteModal()},children:"No"})]})]}),this.state.selectedBook?Object(T.jsxs)(v.a,{isOpen:this.state.isEditModalOpen,toggle:this.toggleEditModal,children:[Object(T.jsx)(N.a,{toggle:this.toggleEditModal,children:"Edit a book"}),Object(T.jsx)(k.a,{children:Object(T.jsxs)(A.LocalForm,{onSubmit:function(e){return r.handleSubmitEdit(e)},children:[Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"name",md:2,children:"Name "}),Object(T.jsxs)($.a,{md:10,children:[Object(T.jsx)(A.Control.text,{model:".name",id:"name",name:"name",defaultValue:this.state.selectedBook.name,className:"form-control",validators:{required:Mt,minLength:St(3),uniqueName:(s=this.state.selectedBook.name,function(e){return!r.props.books.books.some((function(t){return t.name===e}))||e===s})}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".name",show:"touched",messages:{required:"Required",minLength:"Must be greater than 2 characters",uniqueName:" There exists a book with this name already"}})]})]}),Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"author",md:2,children:"Authors "}),Object(T.jsxs)($.a,{md:10,children:[Object(T.jsx)(A.Control.text,{model:".author",id:"author",name:"author",defaultValue:this.state.selectedBook.author,className:"form-control",validators:{required:Mt,minLength:St(3)}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".author",show:"touched",messages:{required:"Required",minLength:"Must be greater than 2 characters"}})]})]}),Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"isbn",md:4,children:"ISBN No."}),Object(T.jsxs)($.a,{md:8,children:[Object(T.jsx)(A.Control.text,{model:".isbn",id:"isbn",name:"isbn",defaultValue:this.state.selectedBook.isbn,className:"form-control",validators:{required:Mt,minLength:St(10),maxLength:(t=13,function(e){return!e||e.length<=t}),isNumber:Dt,uniqueIsbn:(e=this.state.selectedBook.isbn,function(t){return!r.props.books.books.some((function(e){return e.isbn===t}))||t===e})}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".isbn",show:"touched",messages:{required:"Required",minLength:"Must be greater than 9 numbers",maxLength:"Must be 13 numbers or less",isNumber:"Must be a number",uniqueIsbn:" There exists a book with this ISBN No."}})]})]}),Object(T.jsx)(Z.a,{className:"form-group",children:Object(T.jsxs)($.a,{children:[Object(T.jsx)(M.a,{htmlFor:"cat",children:"Category"}),Object(T.jsxs)(A.Control.select,{model:".cat",id:"cat",className:"form-control",defaultValue:this.state.selectedBook.cat,children:[Object(T.jsx)("option",{children:"Romance"})," ",Object(T.jsx)("option",{children:"Technology"}),Object(T.jsx)("option",{children:"Computer Science"})," ",Object(T.jsx)("option",{children:"Management"}),Object(T.jsx)("option",{children:"Electronics"})," ",Object(T.jsx)("option",{children:"Physics"}),Object(T.jsx)("option",{children:"Chemistry"})," ",Object(T.jsx)("option",{children:"Mathematics"}),Object(T.jsx)("option",{children:"Fiction"})," ",Object(T.jsx)("option",{children:"Philosophy"}),Object(T.jsx)("option",{children:"Language"})," ",Object(T.jsx)("option",{children:"Arts"}),Object(T.jsx)("option",{children:"Other"})]})]})}),Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"copies",md:6,children:" Copies Available"}),Object(T.jsxs)($.a,{md:6,children:[Object(T.jsx)(A.Control.text,{model:".copies",id:"copies",name:"copies",defaultValue:this.state.selectedBook.copies,className:"form-control",validators:{requiredNum:Et,minVal:Ct(1),maxVal:Lt(1e3),isNumber:Dt}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".copies",messages:{requiredNum:"Required",minVal:"Must be greater than 0",maxVal:"Must be 1000 or less",isNumber:"Must be a number"}})]})]}),Object(T.jsx)(Z.a,{className:"form-group",children:Object(T.jsxs)($.a,{children:[Object(T.jsx)(M.a,{htmlFor:"floor",children:"Floor "}),Object(T.jsxs)(A.Control.select,{model:".floor",id:"floor",className:"form-control",defaultValue:this.state.selectedBook.floor,children:[Object(T.jsx)("option",{children:"0"})," ",Object(T.jsx)("option",{children:"1"}),Object(T.jsx)("option",{children:"2"})," ",Object(T.jsx)("option",{children:"3"}),Object(T.jsx)("option",{children:"4"})," ",Object(T.jsx)("option",{children:"5"}),Object(T.jsx)("option",{children:"6"})," ",Object(T.jsx)("option",{children:"7"}),Object(T.jsx)("option",{children:"8"})]})]})}),Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"shelf",md:6,children:" Shelf"}),Object(T.jsxs)($.a,{md:6,children:[Object(T.jsx)(A.Control.text,{model:".shelf",id:"shelf",name:"shelf",defaultValue:this.state.selectedBook.shelf,className:"form-control",validators:{requiredNum:Et,minVal:Ct(1),maxVal:Lt(100),isNumber:Dt}}),Object(T.jsx)(A.Errors,{className:"text-danger",model:".shelf",messages:{requiredNum:"Required",minVal:"Must be greater than 0",maxVal:"Must be 100 or less",isNumber:"Must be a number"}})]})]}),Object(T.jsxs)(Z.a,{className:"form-group",children:[Object(T.jsx)(M.a,{htmlFor:"description",md:2,children:"Description"}),Object(T.jsx)($.a,{md:10,children:Object(T.jsx)(A.Control.textarea,{model:".description",id:"description",name:"description",rows:"12",defaultValue:this.state.selectedBook.description,className:"form-control"})})]}),Object(T.jsx)(Z.a,{children:Object(T.jsx)($.a,{className:"ml-auto mr-auto",children:Object(T.jsx)(b.a,{type:"submit",className:"bg-primary",children:"Submit"})})})]})})]}):Object(T.jsx)(n.a.Fragment,{})]})}}]),s}(r.Component),At=Object(Ae.g)(Object(Te.connect)((function(e){return{books:e.books,auth:e.auth,issues:e.issues,users:e.users}}),(function(e){return{fetchBooks:function(){e((function(e){return e(at(!0)),fetch("/api/books").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(ot(t))})).catch((function(t){return e(ct(t.message))}))}))},fetchIssues:function(t){e(xt(t))},fetchUsers:function(){e(nt())},postBook:function(t,s,r,n,a,c,o,i){return e(rt(t,s,r,n,a,c,o,i))},editBook:function(t,s,r,n,a,c,o,i,l){return e(function(e,t,s,r,n,a,c,o,i){return function(l){var j={name:t,author:s,description:r,isbn:n,cat:a,floor:c,shelf:o,copies:i},d="Bearer "+localStorage.getItem("token");return fetch("/api/books/"+e,{method:"PUT",body:JSON.stringify(j),headers:{"Content-Type":"application/json",Authorization:d}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return l(jt(e))})).catch((function(e){alert("Your book could not be edited\nError: "+e.message)}))}}(t,s,r,n,a,c,o,i,l))},deleteBook:function(t){return e(function(e){return function(t){var s="Bearer "+localStorage.getItem("token");return fetch("/api/books/"+e,{method:"DELETE",headers:{Authorization:s}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return t(ut(e))})).catch((function(e){alert("Your book could not be deleted\nError: "+e.message)}))}}(t))},loginUser:function(t){return e(bt(t))},logoutUser:function(){return e(Nt())},registerUser:function(t){return e(function(e){return function(t){return fetch("/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(!e.success){var t=new Error("Error "+e.status);throw t.response=e,t}alert("Registration Successful")})).catch((function(e){return alert(e.message+"\nMay be someone has already registered with that username, email or Roll No.\nTry Entering a new username,email or Roll No. ")}))}}(t))},editUser:function(t,s,r,n,a){return e(function(e,t,s,r,n){return function(a){var c={firstname:t,lastname:s,roll:r,email:n},o="Bearer "+localStorage.getItem("token");return fetch("/api/users/"+e,{method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:o}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return localStorage.removeItem("userinfo"),localStorage.setItem("userinfo",JSON.stringify(e)),a(dt(e))})).catch((function(e){alert("Your profile could not be edited\nError: "+e.message+"\n May be someone has already registered with that Roll No. or Email")}))}}(t,s,r,n,a))},editPassword:function(t,s,r){return e(function(e,t,s){return function(r){var n="Bearer "+localStorage.getItem("token");return fetch("/api/users/password/"+e,{method:"PUT",body:JSON.stringify({password:s}),headers:{"Content-Type":"application/json",Authorization:n}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText+"\n ");throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){var n={username:t,password:s};return localStorage.removeItem("creds"),localStorage.setItem("creds",JSON.stringify(n)),alert("Password changed successfully"),r(ht(n))})).catch((function(e){alert("Your password could not be changed\nError: "+e.message)}))}}(t,s,r))},postIssue:function(t,s){return e(mt(t,s))},returnIssue:function(t){return e(Ot(t))}}}))(It)),Tt=s(35),Ft=s(111),Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,books:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,errMess:null,books:t.payload});case Fe:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,errMess:null,books:[]});case Re:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,errMess:t.payload});case qe:var s=t.payload;return Object(o.a)(Object(o.a)({},e),{},{books:e.books.concat(s)});case _e:var r=t.payload;return Object(o.a)(Object(o.a)({},e),{},{books:e.books.map((function(e){return e._id===r._id?r:e}))});case Ue:var n=t.payload;return Object(o.a)(Object(o.a)({},e),{},{books:e.books.filter((function(e){return e._id!==n._id}))});default:return e}},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),user:localStorage.getItem("creds")?JSON.parse(localStorage.getItem("creds")):null,userinfo:localStorage.getItem("userinfo")?JSON.parse(localStorage.getItem("userinfo")):null,errMess:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,isAuthenticated:!1,user:t.creds});case Ve:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isAuthenticated:!0,errMess:"",token:t.token,userinfo:t.userinfo});case Je:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isAuthenticated:!1,errMess:t.message});case Ye:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,isAuthenticated:!0});case ze:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isAuthenticated:!1,token:"",user:null,userinfo:null});case Ge:return Object(o.a)(Object(o.a)({},e),{},{userinfo:t.payload});case Ke:return Object(o.a)(Object(o.a)({},e),{},{user:t.payload});default:return e}},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,issues:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $e:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,errMess:null,issues:t.payload});case We:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,errMess:null,issues:[]});case Ze:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,errMess:t.payload});case He:var s=t.payload;return Object(o.a)(Object(o.a)({},e),{},{issues:e.issues.concat(s)});case Qe:var r=t.payload;return Object(o.a)(Object(o.a)({},e),{},{issues:e.issues.map((function(e){return e._id===r._id?r:e}))});default:return e}},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tt:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,errMess:null,users:t.payload});case Xe:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0,errMess:null,users:[]});case et:return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,errMess:t.payload});default:return e}},Ut=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Tt.compose,Pt=(s(178),s(179),s(180),Object(Tt.createStore)(Object(Tt.combineReducers)({books:Rt,auth:Bt,issues:qt,users:_t}),Ut(Object(Tt.applyMiddleware)(Ft.a))));var Vt=function(){return Object(T.jsx)(Te.Provider,{store:Pt,children:Object(T.jsx)(I.a,{children:Object(T.jsx)("div",{className:"App",children:Object(T.jsx)(At,{})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(T.jsx)(Vt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[181,1,2]]]);
//# sourceMappingURL=main.4655de74.chunk.js.map